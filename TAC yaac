%{
#include "y.tab.h"
%}

%%

[0-9]+          { yylval.num = atoi(yytext); return NUMBER; }
[-+*/=()]       { return yytext[0]; }
[a-zA-Z][a-zA-Z0-9]*    { yylval.str = strdup(yytext); return IDENTIFIER; }
[ \t\n]         ; /* skip whitespace */
.               ;

%%







%{
#include <stdio.h>
%}

%token NUMBER IDENTIFIER

%%

program: /* empty */
       | program expr '\n' { printf("%d\n", $2); }
       ;

expr:   term
       | expr '+' term { $$ = $1 + $3; }
       | expr '-' term { $$ = $1 - $3; }
       ;

term:   factor
       | term '*' factor { $$ = $1 * $3; }
       | term '/' factor { $$ = $1 / $3; }
       ;

factor: NUMBER
       | IDENTIFIER
       | '(' expr ')' { $$ = $2; }
       ;

%%

int main() {
    yyparse();
    return 0;
}
